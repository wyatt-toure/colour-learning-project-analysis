<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>ESM Model 2 - Controlling for feeding count | Analysis for Biases in learned foraging preferences for coloured objects in Trinidadian guppies</title>
  <meta name="description" content="ESM Model 2 - Controlling for feeding count | Analysis for Biases in learned foraging preferences for coloured objects in Trinidadian guppies" />
  <meta name="generator" content="bookdown 0.21 and GitBook 2.6.7" />

  <meta property="og:title" content="ESM Model 2 - Controlling for feeding count | Analysis for Biases in learned foraging preferences for coloured objects in Trinidadian guppies" />
  <meta property="og:type" content="book" />
  
  
  
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="ESM Model 2 - Controlling for feeding count | Analysis for Biases in learned foraging preferences for coloured objects in Trinidadian guppies" />
  
  
  

<meta name="author" content="Wyatt Toure" />



  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="model-4-is-there-a-difference-in-feeding-attempts-between-treatments.html"/>
<link rel="next" href="tools-used-and-references.html"/>
<script src="libs/header-attrs-2.6.4/header-attrs.js"></script>
<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Colour learning analysis</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Background</a></li>
<li class="chapter" data-level="" data-path="model-1-preference-for-the-green-object-at-baseline.html"><a href="model-1-preference-for-the-green-object-at-baseline.html"><i class="fa fa-check"></i>Model 1 - Preference for the green object at baseline</a></li>
<li class="chapter" data-level="" data-path="model-2-preference-for-the-rewarding-object-during-training.html"><a href="model-2-preference-for-the-rewarding-object-during-training.html"><i class="fa fa-check"></i>Model 2 - Preference for the rewarding object during training</a></li>
<li class="chapter" data-level="" data-path="model-3-preference-for-the-rewarded-object-during-testing-depending-on-treatment.html"><a href="model-3-preference-for-the-rewarded-object-during-testing-depending-on-treatment.html"><i class="fa fa-check"></i>Model 3 - Preference for the rewarded object during testing depending on treatment</a>
<ul>
<li class="chapter" data-level="" data-path="model-3-preference-for-the-rewarded-object-during-testing-depending-on-treatment.html"><a href="model-3-preference-for-the-rewarded-object-during-testing-depending-on-treatment.html#main-effects"><i class="fa fa-check"></i>Main effects</a></li>
<li class="chapter" data-level="" data-path="model-3-preference-for-the-rewarded-object-during-testing-depending-on-treatment.html"><a href="model-3-preference-for-the-rewarded-object-during-testing-depending-on-treatment.html#post-hoc-comparisons"><i class="fa fa-check"></i>Post-hoc Comparisons</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="esm-model-1-preference-for-the-rewarded-object-during-training-based-on-feeding.html"><a href="esm-model-1-preference-for-the-rewarded-object-during-training-based-on-feeding.html"><i class="fa fa-check"></i>ESM Model 1 - Preference for the rewarded object during training based on feeding</a></li>
<li class="chapter" data-level="" data-path="model-4-is-there-a-difference-in-feeding-attempts-between-treatments.html"><a href="model-4-is-there-a-difference-in-feeding-attempts-between-treatments.html"><i class="fa fa-check"></i>Model 4 - Is there a difference in feeding attempts between treatments?</a></li>
<li class="chapter" data-level="" data-path="esm-model-2-controlling-for-feeding-count.html"><a href="esm-model-2-controlling-for-feeding-count.html"><i class="fa fa-check"></i>ESM Model 2 - Controlling for feeding count</a>
<ul>
<li class="chapter" data-level="" data-path="esm-model-2-controlling-for-feeding-count.html"><a href="esm-model-2-controlling-for-feeding-count.html#esm-model-2a---removing-individual-that-did-not-feed"><i class="fa fa-check"></i>ESM Model 2a - Removing individual that did not feed</a></li>
<li class="chapter" data-level="" data-path="esm-model-2-controlling-for-feeding-count.html"><a href="esm-model-2-controlling-for-feeding-count.html#esm-model-2b---including-feeding-counut-as-a-covariate"><i class="fa fa-check"></i>ESM Model 2b - Including feeding counut as a covariate</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="tools-used-and-references.html"><a href="tools-used-and-references.html"><i class="fa fa-check"></i>Tools used and References</a></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Analysis for Biases in learned foraging preferences for coloured objects in Trinidadian guppies</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="esm-model-2---controlling-for-feeding-count" class="section level1">
<h1>ESM Model 2 - Controlling for feeding count</h1>
<p><strong>Variables</strong></p>
<ul>
<li><code>rewarding.object.preference</code> is the time (seconds) spent near the rewarding object subtracted by the time spent near the unrewarding object</li>
<li><code>rewarding.object.colour</code> is the identity of the rewarding object (blue or green)</li>
<li><code>trial</code> is the number of the training trial. In this model it is supplied as an integer</li>
<li><code>id</code> is the identity of the individual fish</li>
<li><code>feeding.count</code> is the number of trials in which an individual fish ate</li>
</ul>
<div id="esm-model-2a---removing-individual-that-did-not-feed" class="section level2">
<h2>ESM Model 2a - Removing individual that did not feed</h2>
<p>There is a fish that did not eat during any trials, however removing this individual does not change the conclusions</p>
<p><strong>Model</strong></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb7-1"><a href="esm-model-2-controlling-for-feeding-count.html#cb7-1" aria-hidden="true" tabindex="-1"></a>test.feeding.data.low.feeders.removed <span class="ot">=</span> test.feeding.data <span class="sc">%&gt;%</span> <span class="fu">filter</span>(feeding.count <span class="sc">&gt;</span> <span class="dv">0</span>)</span>
<span id="cb7-2"><a href="esm-model-2-controlling-for-feeding-count.html#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="esm-model-2-controlling-for-feeding-count.html#cb7-3" aria-hidden="true" tabindex="-1"></a>test.feeding.data.low.feeders.removed.model <span class="ot">=</span> </span>
<span id="cb7-4"><a href="esm-model-2-controlling-for-feeding-count.html#cb7-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glmmTMB</span>(rewarding.object.preference <span class="sc">~</span>  trial <span class="sc">*</span> rewarding.object.colour <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>id) <span class="sc">+</span> </span>
<span id="cb7-5"><a href="esm-model-2-controlling-for-feeding-count.html#cb7-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">diag</span>(<span class="dv">0</span> <span class="sc">+</span> rewarding.object.colour<span class="sc">:</span>trial <span class="sc">|</span>id),</span>
<span id="cb7-6"><a href="esm-model-2-controlling-for-feeding-count.html#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> test.feeding.data.low.feeders.removed, <span class="at">family =</span> gaussian)</span></code></pre></div>
<p><strong>Results</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="left">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">trial21</td>
<td align="right">24.090287</td>
<td align="right">9.694064</td>
<td align="right">2.4850556</td>
<td align="left">0.013</td>
</tr>
<tr class="even">
<td align="left">rewarding.object.colourgreen</td>
<td align="right">3.041878</td>
<td align="right">5.538292</td>
<td align="right">0.5492448</td>
<td align="left">0.583</td>
</tr>
<tr class="odd">
<td align="left">trial21:rewarding.object.colourgreen</td>
<td align="right">58.957599</td>
<td align="right">20.678839</td>
<td align="right">2.8511079</td>
<td align="left">0.004</td>
</tr>
</tbody>
</table>
<p><strong>Model Residuals</strong></p>
<p><img src="Analysis-for-Bias-in-the-shift-of-foraging-preference-for-coloured-objects-in-Trinidadian-guppies_files/figure-html/unnamed-chunk-29-1.png" width="672" /></p>
</div>
<div id="esm-model-2b---including-feeding-counut-as-a-covariate" class="section level2">
<h2>ESM Model 2b - Including feeding counut as a covariate</h2>
<p>Moreover, as I demonstrate in the next model including the amount of trials fed as a covariate in the model does not change the conclusions.</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb8-1"><a href="esm-model-2-controlling-for-feeding-count.html#cb8-1" aria-hidden="true" tabindex="-1"></a>test.data.feeding.controlled.model <span class="ot">=</span> </span>
<span id="cb8-2"><a href="esm-model-2-controlling-for-feeding-count.html#cb8-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">glmmTMB</span>(rewarding.object.preference <span class="sc">~</span>  trial <span class="sc">*</span> rewarding.object.colour <span class="sc">+</span> feeding.count <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>id) <span class="sc">+</span> </span>
<span id="cb8-3"><a href="esm-model-2-controlling-for-feeding-count.html#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">diag</span>(<span class="dv">0</span> <span class="sc">+</span> rewarding.object.colour<span class="sc">*</span>trial <span class="sc">|</span>id), </span>
<span id="cb8-4"><a href="esm-model-2-controlling-for-feeding-count.html#cb8-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> test.feeding.data, <span class="at">family =</span> gaussian)</span></code></pre></div>
<p><strong>Results</strong></p>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="left">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">trial21</td>
<td align="right">17.6968896</td>
<td align="right">9.5533254</td>
<td align="right">1.8524324</td>
<td align="left">0.064</td>
</tr>
<tr class="even">
<td align="left">rewarding.object.colourgreen</td>
<td align="right">1.2413021</td>
<td align="right">5.5140983</td>
<td align="right">0.2251142</td>
<td align="left">0.822</td>
</tr>
<tr class="odd">
<td align="left">feeding.count</td>
<td align="right">0.4940784</td>
<td align="right">0.5786047</td>
<td align="right">0.8539136</td>
<td align="left">0.393</td>
</tr>
<tr class="even">
<td align="left">trial21:rewarding.object.colourgreen</td>
<td align="right">65.3519392</td>
<td align="right">19.8470755</td>
<td align="right">3.2927743</td>
<td align="left">&lt; .001</td>
</tr>
</tbody>
</table>
<p>The main results do not change if I control for feeding count. The above table is the output feeding controlled model. Below we have the output table for the non-feeding-count controlled model from <a href="https://wyatt-toure.github.io/colour-learning-project-analysis/model-3-preference-for-the-rewarded-object-during-testing-depending-on-treatment.html">model 3</a>.</p>
<table>
<thead>
<tr class="header">
<th align="left">term</th>
<th align="right">estimate</th>
<th align="right">std.error</th>
<th align="right">statistic</th>
<th align="right">p.value</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">trial21</td>
<td align="right">17.697362</td>
<td align="right">10.016982</td>
<td align="right">1.766736</td>
<td align="right">0.0772725</td>
</tr>
<tr class="even">
<td align="left">rewarding.object.colourgreen</td>
<td align="right">1.644944</td>
<td align="right">5.542077</td>
<td align="right">0.296810</td>
<td align="right">0.7666115</td>
</tr>
<tr class="odd">
<td align="left">trial21:rewarding.object.colourgreen</td>
<td align="right">65.350592</td>
<td align="right">20.832230</td>
<td align="right">3.136995</td>
<td align="right">0.0017069</td>
</tr>
</tbody>
</table>
<p>In both models the p-values are similar. While the effect of feeding count is not significant (p = 0.393) the effect of feeding count trends in the expected direction in our feeding count controlled model. In the effect plot below to the left we see that as feeding count increases the preference for the rewarding object colour also increases.</p>
<p><img src="Analysis-for-Bias-in-the-shift-of-foraging-preference-for-coloured-objects-in-Trinidadian-guppies_files/figure-html/unnamed-chunk-34-1.png" width="672" /></p>
<p><strong>Model Residuals</strong></p>
<p><img src="Analysis-for-Bias-in-the-shift-of-foraging-preference-for-coloured-objects-in-Trinidadian-guppies_files/figure-html/unnamed-chunk-35-1.png" width="672" /></p>
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="model-4-is-there-a-difference-in-feeding-attempts-between-treatments.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="tools-used-and-references.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": false,
"twitter": false,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["Analysis-for-Bias-in-the-shift-of-foraging-preference-for-coloured-objects-in-Trinidadian-guppies.epub"],
"toc": {
"collapse": "subsection"
},
"highlight": "pygments"
});
});
</script>

</body>

</html>
